<?xml version="1.0" encoding="UTF-8"?>
<batch-config xmlns="http://www.cra-arc.gc.ca" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.cra-arc.gc.ca batch-config.xsd">
    <!-- jndi-name to be used to lookup the batch application component  -->
    <jndi-name>ca.gc.cra.fxit.ctsagent.batch.BatchInitiatorHome</jndi-name>
    <ctsagent>
	    <!-- Specify true to enforce maximum xml file sizes, and transform each flat file into 1 or more XML files. -->
	    <!-- Specify false to transform each flat file into exactly 1 XML files. -->
	     <MaxXmlFileSizeIsEnabled>false</MaxXmlFileSizeIsEnabled>
	    
	    <!-- Specify maximum XML file size in bytes. Applicable only when MaxXmlFileSizeIsEnabled is set to true. -->
	     <MaxXmlFileSize>524288000</MaxXmlFileSize>
	    
	    
    </ctsagent>
    
    <job id="IN_PRE">
      <task id="uncompressPackage"       sequence="1" class="ca.gc.cra.fxit.ctsagent.task.UncompressPackage"/>
      <task id="validateMetadata"        sequence="2" class="ca.gc.cra.fxit.ctsagent.task.ValidateMetadata"/>
      <task id="savePreparedInboundData" sequence="3" class="ca.gc.cra.fxit.ctsagent.task.SavePreparedInboundData"/>    
	</job>
    
   <job id="IN_Unpackaging">
     <task id="decrypt"                  sequence="1" class="ca.gc.cra.fxit.ctsagent.task.Decrypt"/>
     <task id="uncompressPayload"        sequence="2" class="ca.gc.cra.fxit.ctsagent.task.UncompressPayload"/>
     <task id="validateDigitalSignature" sequence="3" class="ca.gc.cra.fxit.ctsagent.task.ValidateDigitalSignature"/>
     <task id="validateXML"              sequence="4" class="ca.gc.cra.fxit.ctsagent.task.ValidateXML"/>
     <task id="pushData"                 sequence="5" class="ca.gc.cra.fxit.ctsagent.task.PushData"/>   
	</job>
	
	<job id="OUT_PL">
	  <task id="generateXML"              sequence="1" class="ca.gc.cra.fxit.ctsagent.task.GenerateXML"/>
      <task id="checkFileSize"            sequence="2" class="ca.gc.cra.fxit.ctsagent.task.CheckFileSize"/>
      <task id="generateMetadata"         sequence="3" class="ca.gc.cra.fxit.ctsagent.task.GenerateMetadata"/>
      <task id="savePreparedOutboundData" sequence="4" class="ca.gc.cra.fxit.ctsagent.task.SavePreparedOutboundData"/>  
    </job>
    
    <job id="OUT_PK">
      <task id="applyDigitalSignature" sequence="1" class="ca.gc.cra.fxit.ctsagent.task.ApplyDigitalSignature"/>
      <task id="compressPayload"       sequence="2" class="ca.gc.cra.fxit.ctsagent.task.CompressPayload"/>
      <task id="encrypt"               sequence="3" class="ca.gc.cra.fxit.ctsagent.task.Encrypt"/>
      <task id="compressPackage"       sequence="4" class="ca.gc.cra.fxit.ctsagent.task.CompressPackage"/>
      <task id="pushData"              sequence="5" class="ca.gc.cra.fxit.ctsagent.task.PushData"/>   
	</job>
	
</batch-config>
